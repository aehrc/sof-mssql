{
  "resourceType": "ViewDefinition",
  "id": "patient-demographics",
  "url": "http://example.org/fhir/ViewDefinition/patient-demographics",
  "version": "1.0.0",
  "name": "patient_demographics",
  "title": "Patient Demographics View",
  "status": "active",
  "experimental": false,
  "date": "2025-01-01",
  "publisher": "Example Healthcare Organisation",
  "description": "A tabular view of basic patient demographic information including names, gender, birth date, and contact details.",
  "resource": "Patient",
  "fhirVersion": ["4.0.1", "5.0.0"],
  "select": [
    {
      "column": [
        {
          "name": "patient_id",
          "path": "id",
          "type": "id",
          "description": "Unique patient identifier"
        },
        {
          "name": "gender",
          "path": "gender",
          "type": "code",
          "description": "Patient gender"
        },
        {
          "name": "birth_date",
          "path": "birthDate",
          "type": "date",
          "description": "Date of birth"
        },
        {
          "name": "active",
          "path": "active",
          "type": "boolean",
          "description": "Whether patient record is active"
        }
      ]
    },
    {
      "forEach": "name.where(use = 'official').first()",
      "column": [
        {
          "name": "given_name",
          "path": "given.join(' ')",
          "type": "string",
          "description": "Given names concatenated"
        },
        {
          "name": "family_name",
          "path": "family",
          "type": "string",
          "description": "Family name"
        }
      ]
    },
    {
      "forEach": "telecom.where(system = 'email').first()",
      "column": [
        {
          "name": "email",
          "path": "value",
          "type": "string",
          "description": "Primary email address"
        }
      ]
    },
    {
      "forEach": "telecom.where(system = 'phone' and use = 'mobile').first()",
      "column": [
        {
          "name": "mobile_phone",
          "path": "value",
          "type": "string",
          "description": "Mobile phone number"
        }
      ]
    }
  ],
  "where": [
    {
      "path": "active = true",
      "description": "Only include active patients"
    }
  ]
}